(()=>{var e={};e.id=1278,e.ids=[1278],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71017:e=>{"use strict";e.exports=require("path")},57310:e=>{"use strict";e.exports=require("url")},24802:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(69872),a(13033),a(70652),a(41888);var r=a(23191),s=a(88716),o=a(37922),n=a.n(o),i=a(95231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d=["",{children:["dashboard",{children:["(Withdraw)",{children:["withdrawNow",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,69872)),"D:\\Webdesigne\\Work\\bloombax\\app\\dashboard\\(Withdraw)\\withdrawNow\\page.jsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,13033)),"D:\\Webdesigne\\Work\\bloombax\\app\\dashboard\\layout.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,70652)),"D:\\Webdesigne\\Work\\bloombax\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,41888)),"D:\\Webdesigne\\Work\\bloombax\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Webdesigne\\Work\\bloombax\\app\\dashboard\\(Withdraw)\\withdrawNow\\page.jsx"],u="/dashboard/(Withdraw)/withdrawNow/page",h={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/(Withdraw)/withdrawNow/page",pathname:"/dashboard/withdrawNow",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},49683:(e,t,a)=>{Promise.resolve().then(a.bind(a,23583))},27951:(e,t,a)=>{"use strict";a.d(t,{N:()=>r});let r=async({trx:e})=>{try{let t=await fetch("/api/checkTransactionStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trx:e})});if(!t.ok)throw Error("Transaction Failed");return await t.json()}catch(e){throw e}}},23583:(e,t,a)=>{"use strict";a.d(t,{default:()=>h});var r=a(10326),s=a(17577),o=a(40381);let n=async()=>{try{let e=await fetch("/api/withdrawOtp",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch Withdraw OTP ");return await e.json()}catch(e){throw e}};function i({onOtpFetched:e,setAmount:t,setAddress:a}){let[i,l]=(0,s.useState)(""),[d,c]=(0,s.useState)(""),u=async t=>{if(t.preventDefault(),i<10){o.ZP.error("Amount must be greater or equal than 10");return}try{let t=await n();!0===t.status?(e(t.otpId),o.ZP.success("OTP fetched successfully")):!1===t.status&&o.ZP.error("Failed to fetch OTP")}catch(e){o.ZP.error("Failed to fetch OTP")}};return(0,r.jsxs)("form",{onSubmit:u,className:"md:w-1/2 w-full flex flex-col gap-5 p-5 border border-gray-500 rounded-2xl",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:"amount",children:"Amount"}),r.jsx("input",{type:"number",id:"amount",name:"amount",value:i,placeholder:"Minimum $10",onChange:e=>{l(e.target.value),t(e.target.value)},className:"px-3 py-2.5 rounded-md bg-transparent outline-none ring-1 w-full"})]}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:"address",children:"Withdraw Address"}),r.jsx("input",{type:"text",id:"address",name:"address",placeholder:"USDT (BEP-20)",value:d,onChange:e=>{c(e.target.value),a(e.target.value)},className:"px-3 py-2.5 rounded-md bg-transparent outline-none ring-1 w-full"})]}),r.jsx("button",{type:"submit",className:"px-5 py-2.5 bg-button-color hover:bg-button-hover-color transition-all duration-200 ease-in-out rounded-md",children:"Get OTP"})]})}let l=async({otpId:e,otp:t})=>{try{let a=await fetch("/api/verifyWithdrawOtp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({otpId:e,otp:t})});if(!a.ok)throw Error("Failed to fetch Verify Withdraw Otp ");return await a.json()}catch(e){throw e}},d=async({amount:e,address:t})=>{try{let a=await fetch("/api/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e,address:t})});if(!a.ok)throw Error("Withdrawl failed");return await a.json()}catch(e){throw e}};var c=a(27951);function u({otpId:e,address:t,amount:a}){let[n,i]=(0,s.useState)(""),[u,h]=(0,s.useState)(!1),p=async r=>{if(r.preventDefault(),h(!0),!e||!n){o.ZP.error("OTP ID and OTP are required");return}try{let r=await l({otpId:e,otp:n});if(!0===r.status){o.ZP.success("OTP verified successfully"),m({address:t,amount:a});return}!1===r.status&&(o.ZP.error("Failed to verify OTP"),h(!1))}catch(e){o.ZP.error("Failed to verify OTP"),h(!1)}},m=async({address:e,amount:t})=>{try{let{status:a,transaction_hash:r}=await d({address:e,amount:t});if(!0===a){let e=await x(r);if(!0===e.status){o.ZP.success("Transaction successful"),h(!1);return}!1===a&&o.ZP.error("Transaction failed.",error)}else!1===a&&(o.ZP.error("Withdral failed"),h(!1))}catch(e){o.ZP.error("Failed to perform withdrawal"),h(!1);return}},x=async e=>{try{let t=await (0,c.N)({trx:e});if(!0===t.status){o.ZP.success("Transaction successful"),h(!1);return}if(!1===t.status){if("Failed"===t.reason)return o.ZP.error("Transaction failed.",error),h(!1),null;o.ZP.loading("Wait for some time",{duration:3e3})}await new Promise(e=>setTimeout(e,5e3));let a=await (0,c.N)({trx:e});if(!0===a.status)return o.ZP.success("Transaction successful"),h(!1),window.location.reload("/dashboard/withdrawHistory"),!0===a.status;return o.ZP.error("Transaction failed.",error),h(!1),null}catch(e){return o.ZP.error("Failed to check transaction status"),h(!1),!1}};return(0,r.jsxs)("form",{onSubmit:p,className:"md:w-1/2 w-full flex flex-col gap-5 p-5 border border-gray-500 rounded-2xl md:mt-0 mt-5",children:[r.jsx("h2",{className:"lg:text-4xl text-3xl lg:font-bold font-semibold gradient-text2 text-center",children:"Submit Your OTP"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[r.jsx("label",{htmlFor:"otp",children:"OTP"}),r.jsx("input",{type:"number",id:"otp",name:"otp",value:n,onChange:e=>{i(e.target.value)},className:"px-3 py-2.5 rounded-md bg-transparent outline-none ring-1 w-full"})]}),r.jsx("button",{type:"submit","aria-disabled":u,disabled:u,className:"flex items-center justify-center px-4 py-2.5 bg-button-color rounded-md hover:bg-button-hover-color hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:u?(0,r.jsxs)(r.Fragment,{children:[r.jsx("svg",{viewBox:"0 0 16 16",fill:"currentColor",className:"size-6 mr-2 text-white animate-spin",children:r.jsx("path",{fill:"currentColor",d:"M8 4.736a.933.933 0 01-.933-.933V1.005a.933.933 0 011.866 0v2.798A.933.933 0 018 4.736zM8 15.577a.583.583 0 01-.583-.583v-2.798a.583.583 0 111.166 0v2.798a.583.583 0 01-.583.583zM5.902 5.24a.875.875 0 01-.758-.437L3.745 2.38a.874.874 0 011.514-.874l1.399 2.423a.874.874 0 01-.756 1.311zM11.498 14.582a.525.525 0 01-.455-.262l-1.399-2.423a.525.525 0 11.909-.525l1.399 2.423a.525.525 0 01-.454.787zM4.365 6.718a.813.813 0 01-.407-.109L1.535 5.21a.817.817 0 01.816-1.414l2.423 1.399a.817.817 0 01-.408 1.523zM14.057 11.964a.461.461 0 01-.233-.063l-2.423-1.399a.467.467 0 01.466-.808l2.423 1.399a.467.467 0 01-.233.87zM3.803 8.758H1.005a.758.758 0 010-1.516h2.798a.758.758 0 110 1.516zM14.995 8.466h-2.798a.466.466 0 110-.932h2.798a.466.466 0 110 .932zM1.943 12.197a.698.698 0 01-.35-1.305l2.423-1.399a.698.698 0 11.699 1.211l-2.423 1.399a.69.69 0 01-.349.094zM11.635 6.368a.466.466 0 01-.233-.87l2.423-1.399a.466.466 0 11.466.808l-2.423 1.399a.469.469 0 01-.233.063zM4.502 14.699a.64.64 0 01-.555-.962l1.399-2.423a.641.641 0 111.111.641l-1.399 2.423a.64.64 0 01-.556.321zM10.098 4.832a.467.467 0 01-.404-.7l1.399-2.423a.467.467 0 01.808.466l-1.399 2.423a.464.464 0 01-.404.233z"})}),"Submitting..."]}):"Withdraw Now"})]})}function h(){let[e,t]=(0,s.useState)(null),[a,o]=(0,s.useState)(""),[n,l]=(0,s.useState)("");return(0,r.jsxs)("div",{className:"flex md:flex-row flex-col gap-5",children:[r.jsx(i,{onOtpFetched:e=>{t(e)},setAmount:o,setAddress:l}),r.jsx(u,{otpId:e,address:n,amount:a})]})}},69872:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(19510),s=a(68570);let o=(0,s.createProxy)(String.raw`D:\Webdesigne\Work\bloombax\components\Withdraw.jsx`),{__esModule:n,$$typeof:i}=o;o.default;let l=(0,s.createProxy)(String.raw`D:\Webdesigne\Work\bloombax\components\Withdraw.jsx#default`);function d(){return(0,r.jsxs)("div",{className:"bg-glass-color glassBlur rounded-2xl my-5 p-5 ",children:[r.jsx("h2",{className:"text-4xl font-bold gradient-text2 text-center mb-10",children:"Withdraw "}),r.jsx(l,{})]})}a(71159)}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[8948,8605,285,325,1497],()=>a(24802));module.exports=r})();