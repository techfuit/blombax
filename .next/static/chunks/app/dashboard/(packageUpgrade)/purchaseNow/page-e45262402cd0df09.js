(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[22],{14833:function(e,t,a){Promise.resolve().then(a.bind(a,25968))},58163:function(e,t,a){"use strict";a.d(t,{N:function(){return r}});let r=async e=>{let{trx:t}=e;try{let e=await fetch("/api/checkTransactionStatus",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trx:t})});if(!e.ok)throw Error("Transaction Failed");return await e.json()}catch(e){throw e}}},74969:function(e,t,a){"use strict";a.d(t,{u:function(){return r}});let r=async()=>{try{let e=await fetch("/api/home",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to fetch home data");return await e.json()}catch(e){throw e}}},25968:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(57437);let n=async e=>{try{let t=await fetch("/api/checkPackageByAmount",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:e})});if(!t.ok)throw Error("Failed to fetch Purchase List data");let{data:a}=await t.json();return a}catch(e){throw Error(e)}};var s=a(16463),o=a(2265),l=a(88726),i=a(58163),c=a(74969);function u(){let e=(0,s.useSearchParams)(),[t,a]=(0,o.useState)(null),[u,d]=(0,o.useState)(100),[h,f]=(0,o.useState)(100),[m,p]=(0,o.useState)(1e4),[x,w]=(0,o.useState)(!1),[b,y]=(0,o.useState)("");(0,o.useEffect)(()=>{(async function(){try{let e=await (0,c.u)();a(e)}catch(e){throw Error(e)}})()},[]),(0,o.useEffect)(()=>{let t=e.get("name"),a=parseFloat(e.get("minprice"))||100,r=parseFloat(e.get("maxprice"))||1e4;t&&y(t),f(a),p(r),d(a)},[e]);let g=async e=>{if(e.preventDefault(),w(!0),h>u>m){l.ZP.error("Invalid amount"),w(!1);return}if(u<h){l.ZP.error("Amount is below the minimum price of $".concat(h,".")),w(!1);return}if(u>m){l.ZP.error("Amount exceeds the maximum price of $".concat(m,".")),w(!1);return}if(u>(null==t?void 0:t.deposit)){l.ZP.error("Insufficient balance."),w(!1);return}try{let e=await n(u);y(e.title)}catch(e){l.ZP.error("Failed to fetch package data");return}try{if(!0===status)await j(transaction_hash),!0===response.status?(l.ZP.success("Transaction successful"),w(!1),window.location.reload("/dashboard/purchaseNow")):l.ZP.error("Transaction failed. Please try again.");else{l.ZP.error("Transaction Failed"),w(!1);return}}catch(e){return}finally{w(!1)}},j=async e=>{try{let t=await (0,i.N)({trx:e});if(!0===t.status){l.ZP.success("Transaction successful");return}l.ZP.loading("Wait for some time",{duration:2e3}),await new Promise(e=>setTimeout(e,7e3));let a=await (0,i.N)({trx:e});return l.ZP.success("Transaction successful"),window.location.replace("/dashboard/withdrawHistory"),!0===a.status}catch(e){return l.ZP.error("Failed to check transaction status"),!1}};return(0,r.jsxs)("div",{className:"bg-glass-color glassBlur rounded-2xl my-5 p-5",children:[(0,r.jsx)("h2",{className:"text-4xl font-bold  text-[#293b79] text-center mb-8",children:"Swap"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-center mb-4",children:["Available Deposit Balance ",(0,r.jsxs)("span",{className:"text-blue-500",children:["$",(null==t?void 0:t.deposit)||0]})," "]}),(0,r.jsxs)("form",{onSubmit:g,className:"flex items-center flex-col gap-5 justify-center px-5 pb-5",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1 justify-center w-full sm:w-[500px]",children:[(0,r.jsx)("label",{htmlFor:"packageName",children:"BMX"}),(0,r.jsx)("input",{type:"text",id:"packageName",name:"packageName",value:b,disabled:!0,className:" w-full px-3 py-2.5 bg-transparent ring-1 outline-none rounded-md "})]}),(0,r.jsx)("svg",{viewBox:"0 0 24 24",fill:"currentColor",height:"1em",width:"1em",className:"size-10",children:(0,r.jsx)("path",{d:"M14 8h-3v6H6V8H3l5.5-6L14 8m1.5 14l5.5-6h-3v-6h-5v6h-3l5.5 6z"})}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 justify-center w-full sm:w-[500px]",children:[(0,r.jsx)("label",{htmlFor:"amount",children:"USDT (BEP-20)"}),(0,r.jsx)("input",{type:"number",id:"amount",name:"amount",placeholder:"Amount between $".concat(h," and $").concat(m),value:u,required:!0,onChange:e=>{d(parseFloat(e.target.value))},className:"w-full px-3 py-2.5 bg-transparent ring-1 outline-none rounded-md"})]}),(0,r.jsx)("button",{type:"submit","aria-disabled":x,disabled:x,className:"flex items-center justify-center px-4 py-2.5 bg-button-color rounded-md hover:bg-button-hover-color hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",children:x?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{viewBox:"0 0 16 16",fill:"currentColor",className:"size-6 mr-2 text-white animate-spin",children:(0,r.jsx)("path",{fill:"currentColor",d:"M8 4.736a.933.933 0 01-.933-.933V1.005a.933.933 0 011.866 0v2.798A.933.933 0 018 4.736zM8 15.577a.583.583 0 01-.583-.583v-2.798a.583.583 0 111.166 0v2.798a.583.583 0 01-.583.583zM5.902 5.24a.875.875 0 01-.758-.437L3.745 2.38a.874.874 0 011.514-.874l1.399 2.423a.874.874 0 01-.756 1.311zM11.498 14.582a.525.525 0 01-.455-.262l-1.399-2.423a.525.525 0 11.909-.525l1.399 2.423a.525.525 0 01-.454.787zM4.365 6.718a.813.813 0 01-.407-.109L1.535 5.21a.817.817 0 01.816-1.414l2.423 1.399a.817.817 0 01-.408 1.523zM14.057 11.964a.461.461 0 01-.233-.063l-2.423-1.399a.467.467 0 01.466-.808l2.423 1.399a.467.467 0 01-.233.87zM3.803 8.758H1.005a.758.758 0 010-1.516h2.798a.758.758 0 110 1.516zM14.995 8.466h-2.798a.466.466 0 110-.932h2.798a.466.466 0 110 .932zM1.943 12.197a.698.698 0 01-.35-1.305l2.423-1.399a.698.698 0 11.699 1.211l-2.423 1.399a.69.69 0 01-.349.094zM11.635 6.368a.466.466 0 01-.233-.87l2.423-1.399a.466.466 0 11.466.808l-2.423 1.399a.469.469 0 01-.233.063zM4.502 14.699a.64.64 0 01-.555-.962l1.399-2.423a.641.641 0 111.111.641l-1.399 2.423a.64.64 0 01-.556.321zM10.098 4.832a.467.467 0 01-.404-.7l1.399-2.423a.467.467 0 01.808.466l-1.399 2.423a.464.464 0 01-.404.233z"})}),"Swaping..."]}):"Swap Now"})]})]})}function d(){return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)("div",{children:"Loading..."}),children:(0,r.jsx)(u,{})})}},16463:function(e,t,a){"use strict";var r=a(71169);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[726,971,23,744],function(){return e(e.s=14833)}),_N_E=e.O()}]);