(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[544],{10995:function(e,r,t){Promise.resolve().then(t.bind(t,9035)),Promise.resolve().then(t.bind(t,42788))},9035:function(e,r,t){"use strict";t.d(r,{default:function(){return n}});var s=t(57437),a=t(57669);t(2265);var o=t(88726);function n(){let{user:e}=(0,a.a)(),r="https://dfmtrade.com/register?referral_by=".concat(null==e?void 0:e.username),t=()=>{navigator.clipboard.writeText(r).then(()=>{o.ZP.success("Referral Id copied successfully",{duration:2e3})}).catch(e=>{o.ZP.error("Failed to copy referral ID")})};return(0,s.jsx)("div",{className:"w-full my-5 p-3 bg-glass-color glassBlur rounded-2xl flex max-md:flex-col gap-5",children:(0,s.jsxs)("div",{className:" w-full p-5 shadow-shadow-bg rounded-2xl",children:[(0,s.jsx)("h2",{className:"text-center text-4xl font-semibold gradient-text2 pb-5",children:"Referral Links"}),(0,s.jsx)("div",{className:"flex flex-col gap-2 items-center justify-center",children:(0,s.jsxs)("div",{className:"flex-row-reverse md:flex-row flex gap-3 w-full ",children:[(0,s.jsx)("div",{className:"px-3 py-2.5 shadow-shadow-bg flex items-center justify-center rounded-2xl  w-full overflow-hidden cursor-pointer ",onClick:t,children:r}),(0,s.jsxs)("button",{className:"font-medium rounded-2xl px-4 py-2.5 shadow-shadow-bg hover:scale-105 bg-button-color hover:bg-button-hover-color flex gap-1 items-center justify-center ",onClick:t,children:[(0,s.jsxs)("svg",{viewBox:"0 0 512 512",fill:"currentColor",className:"w-7 h-6",children:[(0,s.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:32,d:"M185 128 H407 A57 57 0 0 1 464 185 V407 A57 57 0 0 1 407 464 H185 A57 57 0 0 1 128 407 V185 A57 57 0 0 1 185 128 z"}),(0,s.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M383.5 128l.5-24a56.16 56.16 0 00-56-56H112a64.19 64.19 0 00-64 64v216a56.16 56.16 0 0056 56h24"})]}),"Copy"]})]})})]})})}},42788:function(e,r,t){"use strict";t.d(r,{default:function(){return i}});var s=t(57437),a=t(57669),o=t(2265),n=t(88726);function l(){let{user:e}=(0,a.a)(),[r,t]=(0,o.useState)(!1),l=async r=>{r.preventDefault(),t(!0);let s=new FormData(r.target),a=s.get("name"),o=s.get("phone_number");if(!a&&!o){n.ZP.error("No fields have been updated. Please enter new data to update your profile.",{duration:2e3}),t(!1);return}if(a===e.name&&o===e.phone_number){n.ZP.error("No changes detected. Please update your profile information.",{duration:2e3}),t(!1);return}try{let e;let r=await fetch("/api/updateprofile",{method:"POST",body:s});try{e=await r.json()}catch(e){throw Error("Unexpected response format, expected JSON")}r.ok?(n.ZP.success("Profile updated successfully"),window.location.reload()):n.ZP.error(e.error||"Failed to update profile")}catch(e){n.ZP.error("An error occurred. Please try again."),console.error(e)}finally{t(!1)}};return(0,s.jsxs)("form",{onSubmit:l,className:"flex flex-col items-start",children:[(0,s.jsx)("label",{htmlFor:"name",className:"font-medium gradient-text2",children:"Full Name"}),(0,s.jsx)("input",{type:"text",id:"name",name:"name",defaultValue:null==e?void 0:e.name,className:"mb-5 mt-1 px-3 py-2 bg-transparent outline-none border border-slate-300 rounded-md text-lg w-full"}),(0,s.jsx)("label",{htmlFor:"phone_number",className:"font-medium gradient-text2 text-lg",children:"Phone Number"}),(0,s.jsx)("input",{type:"tel",id:"phone_number",name:"phone_number",defaultValue:null==e?void 0:e.phone_number,className:"mb-5 mt-1 px-3 py-2 bg-transparent outline-none border border-slate-300 rounded-md text-lg w-full"}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-pink-500 hover:to-orange-500 text-white py-2 px-4 rounded-md font-medium",children:r?"Updating...":"Update"})]})}function d(){let[e,r]=(0,o.useState)(!1),[t,l]=(0,o.useState)({}),{user:d}=(0,a.a)(),i=e=>{l(r=>({...r,[e]:!r[e]}))},c=async e=>{e.preventDefault(),r(!0);let t=new FormData(e.target),s=t.get("oldPassword"),a=t.get("newPassword"),o=t.get("conPassword"),l=/^(?=.*[a-z])(?=.*[A-Z]).{4,}$/;if(!l.test(a)){n.ZP.error("New password must be at least 4 characters long and contain at least one uppercase letter and one lowercase letter",{duration:2e3}),r(!1);return}if(!l.test(o)){n.ZP.error("Confirm password must be at least 4 characters long and contain at least one uppercase letter and one lowercase letter",{duration:2e3}),r(!1);return}if(a===d.password){n.ZP.error("New password cannot be the same as the current password",{duration:2e3}),r(!1);return}if(a!==o){n.ZP.error("New password and confirm password do not match",{duration:2e3}),r(!1);return}if(s!==d.password){n.ZP.error("Current password is incorrect",{duration:2e3}),r(!1);return}try{let e;let r=await fetch("/api/updatepassword",{method:"POST",body:t});try{e=await r.json()}catch(e){throw Error("Unexpected response format, expected JSON")}r.ok?(n.ZP.success("Password updated successfully"),window.location.reload()):n.ZP.error(e.error||"Failed to update password")}catch(e){n.ZP.error("An error occurred. Please try again."),console.error(e)}finally{r(!1)}};return(0,s.jsxs)("form",{onSubmit:c,className:"flex flex-col items-start",children:[(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("label",{htmlFor:"oldPassword",className:"font-medium gradient-text2",children:"Current Password "}),(0,s.jsx)("input",{type:t.oldPassword?"text":"password",id:"oldPassword",name:"oldPassword",className:"mb-5 mt-1 px-3 py-2 bg-transparent outline-none border border-slate-300 rounded-md text-lg w-full",required:!0}),(0,s.jsx)("button",{type:"button",className:"absolute right-3 top-10",onClick:()=>i("oldPassword"),children:t.oldPassword?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825a3.975 3.975 0 01-3.75 0m-1.425-1.2A9.015 9.015 0 012.08 12a9.014 9.014 0 016.62-6.62m1.425-1.2a3.975 3.975 0 013.75 0m1.425 1.2A9.015 9.015 0 0121.92 12a9.014 9.014 0 01-6.62 6.62m-1.425 1.2a3.975 3.975 0 01-3.75 0M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.929 4.929a12 12 0 0114.142 0m0 0a12.046 12.046 0 013.463 7.071 12.046 12.046 0 01-3.463 7.071m-14.142 0a12.046 12.046 0 01-3.463-7.071 12.046 12.046 0 013.463-7.071m3.463 7.071a4.5 4.5 0 019 0 4.5 4.5 0 01-9 0z"})})})]}),(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("label",{htmlFor:"newPassword",className:"font-medium gradient-text2",children:"New Password "}),(0,s.jsx)("input",{type:t.newPassword?"text":"password",id:"newPassword",name:"newPassword",className:"mb-5 mt-1 px-3 py-2 bg-transparent outline-none border border-slate-300 rounded-md text-lg w-full",required:!0}),(0,s.jsx)("button",{type:"button",className:"absolute right-3 top-10",onClick:()=>i("newPassword"),children:t.newPassword?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825a3.975 3.975 0 01-3.75 0m-1.425-1.2A9.015 9.015 0 012.08 12a9.014 9.014 0 016.62-6.62m1.425-1.2a3.975 3.975 0 013.75 0m1.425 1.2A9.015 9.015 0 0121.92 12a9.014 9.014 0 01-6.62 6.62m-1.425 1.2a3.975 3.975 0 01-3.75 0M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.929 4.929a12 12 0 0114.142 0m0 0a12.046 12.046 0 013.463 7.071 12.046 12.046 0 01-3.463 7.071m-14.142 0a12.046 12.046 0 01-3.463-7.071 12.046 12.046 0 013.463-7.071m3.463 7.071a4.5 4.5 0 019 0 4.5 4.5 0 01-9 0z"})})})]}),(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("label",{htmlFor:"conPassword",className:"font-medium gradient-text2",children:"Confirm Password "}),(0,s.jsx)("input",{type:t.conPassword?"text":"password",id:"conPassword",name:"conPassword",className:"mb-5 mt-1 px-3 py-2 bg-transparent outline-none border border-slate-300 rounded-md text-lg w-full",required:!0}),(0,s.jsx)("button",{type:"button",className:"absolute right-3 top-10",onClick:()=>i("conPassword"),children:t.conPassword?(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825a3.975 3.975 0 01-3.75 0m-1.425-1.2A9.015 9.015 0 012.08 12a9.014 9.014 0 016.62-6.62m1.425-1.2a3.975 3.975 0 013.75 0m1.425 1.2A9.015 9.015 0 0121.92 12a9.014 9.014 0 01-6.62 6.62m-1.425 1.2a3.975 3.975 0 01-3.75 0M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}):(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"h-5 w-5 text-gray-500",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.929 4.929a12 12 0 0114.142 0m0 0a12.046 12.046 0 013.463 7.071 12.046 12.046 0 01-3.463 7.071m-14.142 0a12.046 12.046 0 01-3.463-7.071 12.046 12.046 0 013.463-7.071m3.463 7.071a4.5 4.5 0 019 0 4.5 4.5 0 01-9 0z"})})})]}),(0,s.jsx)("button",{type:"submit",disabled:e,className:"bg-gradient-to-r from-cyan-400 to-blue-600 hover:from-pink-500 hover:to-orange-500 text-white py-2 px-4 rounded-md font-medium",children:e?"Updating...":"Update"})]})}function i(){let{user:e}=(0,a.a)();return(0,s.jsxs)("div",{className:"bg-glass-color glassBlur my-5 rounded-2xl shadow-shadow-bg",children:[(0,s.jsx)("div",{className:'rounded-ss-2xl rounded-se-2xl bg-[url("/profileBg.jpg")] bg-cover bg-center h-80 relative'}),(0,s.jsxs)("div",{className:" mx-3 mt-20 pb-10 ",children:[(0,s.jsx)("div",{className:"bg-blue-500 p-3 rounded-ss-2xl rounded-se-2xl",children:(0,s.jsx)("p",{className:"text-2xl font-medium",children:"Profile Overview"})}),(0,s.jsxs)("div",{className:"min-h-20 bg-base-glass-color flex items-center max-md:flex-col rounded-es-2xl rounded-ee-2xl",children:[(0,s.jsxs)("div",{className:"md:w-1/2 w-full p-5 md:pb-5 pb-1 ",children:[(0,s.jsx)("h3",{className:"font-medium gradient-text2",children:"Username "}),(0,s.jsxs)("p",{className:"text-2xl font-medium mb-2",children:[" ",(null==e?void 0:e.username)||"username"," "]}),(0,s.jsx)("h3",{className:"font-medium gradient-text2",children:"Full Name"}),(0,s.jsxs)("p",{className:"text-2xl font-medium mb-2",children:[" ",(null==e?void 0:e.name)||"Name"," "]}),(0,s.jsx)("h3",{className:"font-medium gradient-text2",children:"Phone Number"}),(0,s.jsx)("p",{className:"text-2xl font-medium mb-2",children:(null==e?void 0:e.phone_number)||"No Number available"})]}),(0,s.jsxs)("div",{className:"md:w-1/2 w-full px-5 md:py-5 py-0",children:[(0,s.jsx)("h3",{className:"font-medium gradient-text2",children:"E-mail"}),(0,s.jsx)("p",{className:"text-2xl font-medium",children:(null==e?void 0:e.email)||"email address"}),(0,s.jsx)("h3",{className:"font-medium gradient-text2",children:"Joining Date"}),(0,s.jsx)("p",{className:"text-2xl font-medium",children:(null==e?void 0:e.created_at)?e.created_at.split(" ")[0]:"No date available"}),(0,s.jsx)("h3",{className:"font-medium gradient-text2",children:"Referral ID"}),(0,s.jsxs)("p",{className:"text-2xl font-medium mb-2",children:[(null==e?void 0:e.refered_by)||"referral id"," "]})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-1 max-md:flex-col",children:[(0,s.jsxs)("div",{className:" px-3 pt-5 pb-10 md:w-1/2 w-full ",children:[(0,s.jsx)("div",{className:"bg-blue-500 p-3 rounded-ss-2xl rounded-se-2xl ",children:(0,s.jsx)("p",{className:"text-2xl font-medium",children:"Update Profile"})}),(0,s.jsx)("div",{className:"min-h-20 bg-base-glass-color rounded-es-2xl rounded-ee-2xl",children:(0,s.jsx)("div",{className:"w-full p-5",children:(0,s.jsx)(l,{})})})]}),(0,s.jsxs)("div",{className:" px-3 pt-5 pb-10 md:w-1/2 w-full ",children:[(0,s.jsx)("div",{className:"bg-blue-500 p-3 rounded-ss-2xl rounded-se-2xl ",children:(0,s.jsx)("p",{className:"text-2xl font-medium",children:"Update Password"})}),(0,s.jsx)("div",{className:"min-h-20 bg-base-glass-color rounded-es-2xl rounded-ee-2xl",children:(0,s.jsx)("div",{className:"w-full p-5",children:(0,s.jsx)(d,{})})})]})]})]})}},57669:function(e,r,t){"use strict";t.d(r,{a:function(){return n}});let s=async()=>{try{let e=await fetch("/api/user",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok){let r=(await e.json()).error||"Failed to fetch Direct Bonus data";throw Error(r)}let{data:r}=await e.json();return r}catch(e){throw e}};var a=t(2265),o=t(88726);let n=()=>{let[e,r]=(0,a.useState)(null),[t,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let e=await s();r(e),n(!1)}catch(e){d()}})()},[]);let l=e=>{r(e)},d=()=>{document.cookie="sessionId=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",localStorage.removeItem("rememberMe"),localStorage.removeItem("email"),r(null)};return{user:e,loading:t,login:async(e,r,t)=>{try{let s=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(!s.ok){if(!1===s.status)throw Error("Incorrect email or password");throw Error("Login failed")}let{status:a,sessionId:n,data:d}=await s.json();if(!a){o.ZP.error("Login unsuccessful",{duration:2e3});return}l(d),document.cookie="sessionId=".concat(n,"; path=/;"),t?(localStorage.setItem("rememberMe","true"),localStorage.setItem("email",e)):(localStorage.removeItem("rememberMe"),localStorage.removeItem("email")),window.location.href="/dashboard",o.ZP.success("Login successful",{duration:2e3})}catch(e){o.ZP.error(e.message||"Login failed",{duration:2e3})}},logout:async()=>{try{if(!(await fetch("/api/logout",{method:"POST"})).ok)throw Error("Logout failed");d(),window.location.href="/login"}catch(e){o.ZP.error(e.message,{duration:2e3})}}}}}},function(e){e.O(0,[726,971,23,744],function(){return e(e.s=10995)}),_N_E=e.O()}]);